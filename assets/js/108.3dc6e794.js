(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{572:function(l,t,_){"use strict";_.r(t);var v=_(27),e=Object(v.a)({},(function(){var l=this,t=l._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[t("h1",{attrs:{id:"i-o多路复用技术的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#i-o多路复用技术的区别"}},[l._v("#")]),l._v(" I/O多路复用技术的区别")]),l._v(" "),t("p",[l._v("I/O多路复用有三种实现方式：select、poll、epoll。")]),l._v(" "),t("p",[l._v("select的缺点：")]),l._v(" "),t("ul",[t("li",[l._v("单个进程打开的FD是有限制的，通过FD——SETSIZE设置，默认1024")]),l._v(" "),t("li",[l._v("每次调用select，都需要吧FD集合从用户态拷贝到内核态，这个开销在FD很多时会很大")]),l._v(" "),t("li",[l._v("对socket扫描是线性扫描，采用轮训方式，效率较低（高并发时）")])]),l._v(" "),t("p",[l._v("poll与select相比，只是没有fd的限制，其它基本一样。")]),l._v(" "),t("p",[l._v("poll的缺点：")]),l._v(" "),t("ul",[t("li",[l._v("每次调用poll，都需要吧FD集合从用户态拷贝到内核态，这个开销在FD很多时会很大")]),l._v(" "),t("li",[l._v("对socket扫描是线性扫描，采用轮训的方法，效率较低")])]),l._v(" "),t("p",[l._v("epoll的缺点：")]),l._v(" "),t("ul",[t("li",[l._v("只能工作在linux下")])]),l._v(" "),t("h2",{attrs:{id:"select-poll-epoll之间的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select-poll-epoll之间的区别"}},[l._v("#")]),l._v(" select/poll/epoll之间的区别")]),l._v(" "),t("table",[t("thead",[t("tr",[t("th"),l._v(" "),t("th",[l._v("select")]),l._v(" "),t("th",[l._v("poll")]),l._v(" "),t("th",[l._v("epoll")])])]),l._v(" "),t("tbody",[t("tr",[t("td",[l._v("数据结构")]),l._v(" "),t("td",[l._v("bitmap")]),l._v(" "),t("td",[l._v("数组")]),l._v(" "),t("td",[l._v("红黑树")])]),l._v(" "),t("tr",[t("td",[l._v("最大连接数")]),l._v(" "),t("td",[l._v("1024")]),l._v(" "),t("td",[l._v("无上限")]),l._v(" "),t("td",[l._v("无上限")])]),l._v(" "),t("tr",[t("td",[l._v("fd拷贝")]),l._v(" "),t("td",[l._v("每次调用select拷贝")]),l._v(" "),t("td",[l._v("每次调用poll拷贝")]),l._v(" "),t("td",[l._v("fd首次调用epoll_ctl拷贝，每次调用epoll_wait不拷贝")])]),l._v(" "),t("tr",[t("td",[l._v("工作效率")]),l._v(" "),t("td",[l._v("轮询：O(n)")]),l._v(" "),t("td",[l._v("轮询：O(n)")]),l._v(" "),t("td",[l._v("回调：O(1)")])])])]),l._v(" "),t("h2",{attrs:{id:"epoll-lt与et模式的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#epoll-lt与et模式的区别"}},[l._v("#")]),l._v(" epoll LT与ET模式的区别")]),l._v(" "),t("ul",[t("li",[l._v("epoll有EPOLLLT和EPOLLET两种触发模式，LT是默认的模式，ET是“高速”模式。")]),l._v(" "),t("li",[l._v("LT模式下，只要这个fd还有数据可读，每次 epoll_wait都会返回它的事件，提醒用户程序去操作。")]),l._v(" "),t("li",[l._v("ET模式下，它只会提示一次，直到下次再有数据流入之前都不会再提示了，无论fd中是否还有数据可读。所以在ET模式下，read一个fd的时候一定要把它的buffer读完，或者遇到EAGAIN错误。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);