<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TreeMap 源码分析 | 开发者笔记</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/note/assets/css/0.styles.fa566ad0.css" as="style"><link rel="preload" href="/note/assets/js/app.e7654e9f.js" as="script"><link rel="preload" href="/note/assets/js/2.e810aa3c.js" as="script"><link rel="preload" href="/note/assets/js/1.07fc4d8c.js" as="script"><link rel="preload" href="/note/assets/js/43.cca6ff22.js" as="script"><link rel="prefetch" href="/note/assets/js/10.555b32ff.js"><link rel="prefetch" href="/note/assets/js/100.d020d8ee.js"><link rel="prefetch" href="/note/assets/js/101.7683a3d7.js"><link rel="prefetch" href="/note/assets/js/102.88714d09.js"><link rel="prefetch" href="/note/assets/js/103.233ddbe4.js"><link rel="prefetch" href="/note/assets/js/104.e433d6c3.js"><link rel="prefetch" href="/note/assets/js/105.fe2e4966.js"><link rel="prefetch" href="/note/assets/js/106.d239b033.js"><link rel="prefetch" href="/note/assets/js/107.3026af59.js"><link rel="prefetch" href="/note/assets/js/108.36315191.js"><link rel="prefetch" href="/note/assets/js/109.81c1c194.js"><link rel="prefetch" href="/note/assets/js/11.028a3c1c.js"><link rel="prefetch" href="/note/assets/js/110.f821be7e.js"><link rel="prefetch" href="/note/assets/js/111.e072da72.js"><link rel="prefetch" href="/note/assets/js/112.c96d9beb.js"><link rel="prefetch" href="/note/assets/js/113.f62b712c.js"><link rel="prefetch" href="/note/assets/js/114.28d5802e.js"><link rel="prefetch" href="/note/assets/js/115.59b34590.js"><link rel="prefetch" href="/note/assets/js/116.e7563be8.js"><link rel="prefetch" href="/note/assets/js/117.2b203c5c.js"><link rel="prefetch" href="/note/assets/js/118.26adca05.js"><link rel="prefetch" href="/note/assets/js/119.54c5dd1e.js"><link rel="prefetch" href="/note/assets/js/12.1b649a19.js"><link rel="prefetch" href="/note/assets/js/120.b3a105c7.js"><link rel="prefetch" href="/note/assets/js/13.c8f31ead.js"><link rel="prefetch" href="/note/assets/js/14.f9046e47.js"><link rel="prefetch" href="/note/assets/js/15.3af5a383.js"><link rel="prefetch" href="/note/assets/js/16.9a3efa49.js"><link rel="prefetch" href="/note/assets/js/17.ef3ca875.js"><link rel="prefetch" href="/note/assets/js/18.831fa1a4.js"><link rel="prefetch" href="/note/assets/js/19.cfea4209.js"><link rel="prefetch" href="/note/assets/js/20.9c5bbcd6.js"><link rel="prefetch" href="/note/assets/js/21.3ad15aa3.js"><link rel="prefetch" href="/note/assets/js/22.45739dd6.js"><link rel="prefetch" href="/note/assets/js/23.0b3b321e.js"><link rel="prefetch" href="/note/assets/js/24.69ce0e0c.js"><link rel="prefetch" href="/note/assets/js/25.0730c414.js"><link rel="prefetch" href="/note/assets/js/26.2834d6fd.js"><link rel="prefetch" href="/note/assets/js/27.b67f9ce5.js"><link rel="prefetch" href="/note/assets/js/28.1b0ec007.js"><link rel="prefetch" href="/note/assets/js/29.c69a505d.js"><link rel="prefetch" href="/note/assets/js/3.922513d5.js"><link rel="prefetch" href="/note/assets/js/30.59c9f0f6.js"><link rel="prefetch" href="/note/assets/js/31.99a0ee4b.js"><link rel="prefetch" href="/note/assets/js/32.34fb1316.js"><link rel="prefetch" href="/note/assets/js/33.4c466f0a.js"><link rel="prefetch" href="/note/assets/js/34.11542871.js"><link rel="prefetch" href="/note/assets/js/35.f46213e9.js"><link rel="prefetch" href="/note/assets/js/36.191cc770.js"><link rel="prefetch" href="/note/assets/js/37.8d31cfbf.js"><link rel="prefetch" href="/note/assets/js/38.10058a9f.js"><link rel="prefetch" href="/note/assets/js/39.95b7b6ef.js"><link rel="prefetch" href="/note/assets/js/4.a1966589.js"><link rel="prefetch" href="/note/assets/js/40.aacc67a1.js"><link rel="prefetch" href="/note/assets/js/41.69d1900a.js"><link rel="prefetch" href="/note/assets/js/42.a10bf330.js"><link rel="prefetch" href="/note/assets/js/44.90b90816.js"><link rel="prefetch" href="/note/assets/js/45.113abd6a.js"><link rel="prefetch" href="/note/assets/js/46.c428ba25.js"><link rel="prefetch" href="/note/assets/js/47.3fddf95f.js"><link rel="prefetch" href="/note/assets/js/48.cc7000a1.js"><link rel="prefetch" href="/note/assets/js/49.b873071f.js"><link rel="prefetch" href="/note/assets/js/5.b21639f8.js"><link rel="prefetch" href="/note/assets/js/50.fb0418b2.js"><link rel="prefetch" href="/note/assets/js/51.3933f89b.js"><link rel="prefetch" href="/note/assets/js/52.5d4b2e9e.js"><link rel="prefetch" href="/note/assets/js/53.b771539b.js"><link rel="prefetch" href="/note/assets/js/54.a0da92be.js"><link rel="prefetch" href="/note/assets/js/55.e3c32e70.js"><link rel="prefetch" href="/note/assets/js/56.c273a07a.js"><link rel="prefetch" href="/note/assets/js/57.d0e02578.js"><link rel="prefetch" href="/note/assets/js/58.72664a5f.js"><link rel="prefetch" href="/note/assets/js/59.d425fbf8.js"><link rel="prefetch" href="/note/assets/js/6.0299a03f.js"><link rel="prefetch" href="/note/assets/js/60.961047ab.js"><link rel="prefetch" href="/note/assets/js/61.dd024c7d.js"><link rel="prefetch" href="/note/assets/js/62.aa0ba217.js"><link rel="prefetch" href="/note/assets/js/63.e2a55dcc.js"><link rel="prefetch" href="/note/assets/js/64.30bf7f34.js"><link rel="prefetch" href="/note/assets/js/65.39726ca4.js"><link rel="prefetch" href="/note/assets/js/66.1addd97a.js"><link rel="prefetch" href="/note/assets/js/67.cc99e8a2.js"><link rel="prefetch" href="/note/assets/js/68.e278ab91.js"><link rel="prefetch" href="/note/assets/js/69.a9c2296f.js"><link rel="prefetch" href="/note/assets/js/7.84671687.js"><link rel="prefetch" href="/note/assets/js/70.51cd3ef1.js"><link rel="prefetch" href="/note/assets/js/71.78a7e100.js"><link rel="prefetch" href="/note/assets/js/72.d5f54084.js"><link rel="prefetch" href="/note/assets/js/73.2b2e81d3.js"><link rel="prefetch" href="/note/assets/js/74.026d5759.js"><link rel="prefetch" href="/note/assets/js/75.b315d618.js"><link rel="prefetch" href="/note/assets/js/76.e4402459.js"><link rel="prefetch" href="/note/assets/js/77.c492b51c.js"><link rel="prefetch" href="/note/assets/js/78.f13c15b5.js"><link rel="prefetch" href="/note/assets/js/79.6da0305c.js"><link rel="prefetch" href="/note/assets/js/80.10321fab.js"><link rel="prefetch" href="/note/assets/js/81.9daf45ce.js"><link rel="prefetch" href="/note/assets/js/82.17c606f7.js"><link rel="prefetch" href="/note/assets/js/83.68053253.js"><link rel="prefetch" href="/note/assets/js/84.cac1ee23.js"><link rel="prefetch" href="/note/assets/js/85.eb45d699.js"><link rel="prefetch" href="/note/assets/js/86.cdfbccd6.js"><link rel="prefetch" href="/note/assets/js/87.edc80e1b.js"><link rel="prefetch" href="/note/assets/js/88.d1cd3a58.js"><link rel="prefetch" href="/note/assets/js/89.ffd23af7.js"><link rel="prefetch" href="/note/assets/js/90.7ea29979.js"><link rel="prefetch" href="/note/assets/js/91.fa52ca7b.js"><link rel="prefetch" href="/note/assets/js/92.1aa72a1e.js"><link rel="prefetch" href="/note/assets/js/93.723b96db.js"><link rel="prefetch" href="/note/assets/js/94.e1a4317f.js"><link rel="prefetch" href="/note/assets/js/95.486c4f74.js"><link rel="prefetch" href="/note/assets/js/96.6f5bcf47.js"><link rel="prefetch" href="/note/assets/js/97.d196e0cc.js"><link rel="prefetch" href="/note/assets/js/98.3213f4f1.js"><link rel="prefetch" href="/note/assets/js/99.e73f1d6c.js"><link rel="prefetch" href="/note/assets/js/vendors~docsearch.200fb47e.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.fa566ad0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">开发者笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/java/base/basic.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/note/java/collection/ArrayList.html" class="nav-link">
  Java集合框架
</a></li><li class="dropdown-item"><!----> <a href="/note/java/concurrent/Theory.html" class="nav-link">
  Java并发编程
</a></li><li class="dropdown-item"><!----> <a href="/note/java/jvm/memory.html" class="nav-link">
  JVM相关
</a></li><li class="dropdown-item"><!----> <a href="/note/java/nio/io.html" class="nav-link">
  Java NIO相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据存储" class="dropdown-title"><span class="title">数据存储</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据存储" class="mobile-dropdown-title"><span class="title">数据存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/storage/database/mysql.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/note/storage/redis/redis-question.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/note/storage/mq/kafka-intro.html" class="nav-link">
  消息队列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/framework/spring-framework/spring-framework-intro.html" class="nav-link">
  Spring框架
</a></li><li class="dropdown-item"><!----> <a href="/note/framework/netty/netty-business-logic.html" class="nav-link">
  Netty
</a></li><li class="dropdown-item"><!----> <a href="/note/framework/apollo/setup-debug-enviroment.html" class="nav-link">
  Apollo源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/arch/system-design/01-scale-from-zero.html" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/note/arch/case-study/rate-limiter.html" class="nav-link">
  案例
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/java/base/basic.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/note/java/collection/ArrayList.html" class="nav-link">
  Java集合框架
</a></li><li class="dropdown-item"><!----> <a href="/note/java/concurrent/Theory.html" class="nav-link">
  Java并发编程
</a></li><li class="dropdown-item"><!----> <a href="/note/java/jvm/memory.html" class="nav-link">
  JVM相关
</a></li><li class="dropdown-item"><!----> <a href="/note/java/nio/io.html" class="nav-link">
  Java NIO相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据存储" class="dropdown-title"><span class="title">数据存储</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据存储" class="mobile-dropdown-title"><span class="title">数据存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/storage/database/mysql.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/note/storage/redis/redis-question.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/note/storage/mq/kafka-intro.html" class="nav-link">
  消息队列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/framework/spring-framework/spring-framework-intro.html" class="nav-link">
  Spring框架
</a></li><li class="dropdown-item"><!----> <a href="/note/framework/netty/netty-business-logic.html" class="nav-link">
  Netty
</a></li><li class="dropdown-item"><!----> <a href="/note/framework/apollo/setup-debug-enviroment.html" class="nav-link">
  Apollo源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="架构" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/arch/system-design/01-scale-from-zero.html" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/note/arch/case-study/rate-limiter.html" class="nav-link">
  案例
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java集合框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/java/collection/ArrayList.html" class="sidebar-link">ArrayList</a></li><li><a href="/note/java/collection/LinkedList.html" class="sidebar-link">LinkedList</a></li><li><a href="/note/java/collection/Vector.html" class="sidebar-link">Vector</a></li><li><a href="/note/java/collection/Stack.html" class="sidebar-link">Stack</a></li><li><a href="/note/java/collection/HashMap.html" class="sidebar-link">HashMap</a></li><li><a href="/note/java/collection/Hashtable.html" class="sidebar-link">Hashtable</a></li><li><a href="/note/java/collection/LinkedHashMap.html" class="sidebar-link">LinkedHashMap</a></li><li><a href="/note/java/collection/TreeMap.html" aria-current="page" class="active sidebar-link">TreeMap</a></li><li><a href="/note/java/collection/Red-Black-Tree.html" class="sidebar-link">Red-Black-Tree</a></li><li><a href="/note/java/collection/HashSet.html" class="sidebar-link">HashSet</a></li><li><a href="/note/java/collection/LinkedHashSet.html" class="sidebar-link">LinkedHashSet</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="treemap-源码分析"><a href="#treemap-源码分析" class="header-anchor">#</a> TreeMap 源码分析</h1> <p><code>TreeMap</code>是另一个经常会用到的<code>Map</code>类型数据结构。<code>HashMap</code>不保证数据有序，<code>LinkedHashMap</code>保证数据可以保持插入顺序（或访问顺序），而如果希望<code>Map</code>能够保持<code>key</code>的大小顺序的时候，就可以使用<code>TreeMap</code>了。</p> <h2 id="类继承结构"><a href="#类继承结构" class="header-anchor">#</a> 类继承结构</h2> <img src="data:image/png;base64,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"> <ol><li><code>TreeMap</code>继承自<code>AbstractMap</code>抽象类。</li> <li><code>TreeMap</code>实现了<code>NavigableMap</code>、<code>Cloneable</code>、<code>Serializable</code>接口。</li> <li><code>NavigableMap</code>接口继承自<code>SortedMap</code>接口。</li> <li><code>SortedMap</code>接口继承自<code>Map</code>接口。</li></ol> <p><code>SortedMap</code>在<code>Map</code>的基础上，提供了基于<code>key</code>的全序排列。<code>NavigableMap</code>顾名思义是可导航的<code>Map</code>，它在<code>SortedMap</code>的基础上，提供了获取小于或大于给定<code>Key</code>的元素。</p> <p><code>SortedMap</code>接口包含的方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回比较大小的comparator</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回key在[fromKey, toKey)范围内的Map子集</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">subMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> fromKey<span class="token punctuation">,</span> <span class="token class-name">K</span> toKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回小于key的Map子集</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">headMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> toKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回大于等于key的Map子集</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">tailMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> fromKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回Map中第一个key</span>
    <span class="token class-name">K</span> <span class="token function">firstKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回Map中最后一个key</span>
    <span class="token class-name">K</span> <span class="token function">lastKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回所有Key构成的有序集合</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回所有Value构成的有序集合</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回所有Entry构成的有序集合</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>NavigableMap</code>接口包含的方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回小于key的第一个元素</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">lowerEntry</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回小于key的第一个键</span>
    <span class="token class-name">K</span> <span class="token function">lowerKey</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回小于等于key的第一个元素</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">floorEntry</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回小于等于key的第一个键</span>
    <span class="token class-name">K</span> <span class="token function">floorKey</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回大于或者等于key的第一个元素</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">ceilingEntry</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回大于或者等于key的第一个键</span>
    <span class="token class-name">K</span> <span class="token function">ceilingKey</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回大于key的第一个元素</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">higherEntry</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回大于key的第一个键</span>
    <span class="token class-name">K</span> <span class="token function">higherKey</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回集合中第一个元素</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">firstEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回集合中最后一个元素</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">lastEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回集合中第一个元素，并从集合中删除</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">pollFirstEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回集合中最后一个元素，并从集合中删除</span>
    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">pollLastEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回一个逆序的Map视图</span>
    <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">descendingMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回一个可导航的key集合</span>
    <span class="token class-name">NavigableSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">navigableKeySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回一个逆序的key集合视图</span>
    <span class="token class-name">NavigableSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">descendingKeySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回一个从fromKey到toKey范围内的Map子集，边界是否包含由fromInclusive和toInclusive设置</span>
    <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">subMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> fromKey<span class="token punctuation">,</span> <span class="token keyword">boolean</span> fromInclusive<span class="token punctuation">,</span>
                             <span class="token class-name">K</span> toKey<span class="token punctuation">,</span>   <span class="token keyword">boolean</span> toInclusive<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回小于toKey的Map子集，边界是否包含由inclusive设置</span>
    <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">headMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> toKey<span class="token punctuation">,</span> <span class="token keyword">boolean</span> inclusive<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回大于fromKey的Map子集，边界是否包含由inclusive设置</span>
    <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">tailMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> fromKey<span class="token punctuation">,</span> <span class="token keyword">boolean</span> inclusive<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 等价于 subMap(fromKey, true, toKey, false)</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">subMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> fromKey<span class="token punctuation">,</span> <span class="token class-name">K</span> toKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 等价于 headMap(toKey, false)</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">headMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> toKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 等价于 tailMap(fromKey, true)</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">tailMap</span><span class="token punctuation">(</span><span class="token class-name">K</span> fromKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="treemap-构造函数"><a href="#treemap-构造函数" class="header-anchor">#</a> TreeMap 构造函数</h2> <p><code>TreeMap</code>有4个重载的构造函数。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    comparator <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    comparator <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token function">putAll</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    comparator <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">buildFromSorted</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>IOException</span> cannotHappen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> cannotHappen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中比较重要的是<code>comparator</code>这个属性，实现了<code>Comparator</code>这个接口，它决定了<code>TreeMap</code>中元素的顺序。如果在构造函数中未指定<code>comparator</code>属性，那么将使用<code>key</code>来决定顺序，此时要求<code>key</code>必须是一个实现了<code>Comparable</code>接口的类型，否则的话会出问题。</p> <p><code>buildFromSorted</code>这个方法是一个内部的私有方法，被多个方法调用，主要功能是从有序数据中构建树结构。</p> <img src="/note/assets/img/TreeMap_buildFromSorted_call_hierarchy.9b377ad4.png"> <p>关于红黑树，后面会单独用一篇文章介绍，这里不再详细说明了。</p> <h2 id="exportentry-包装方法"><a href="#exportentry-包装方法" class="header-anchor">#</a> exportEntry 包装方法</h2> <p>在调用<code>TreeMap</code>的<code>lowerEntry</code>、<code>floorEntry</code>等“导航”方法时，<code>TreeMap</code>会将结果使用<code>exportEntry</code>方法进行包装，返回的是一个<code>AbstractMap.SimpleImmutableEntry</code>类型，这是一个只读的数据结构，当调用诸如<code>setValue</code>等方法的时候，会抛出<code>UnsupportedOperationException</code>异常。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">exportEntry</span><span class="token punctuation">(</span><span class="token class-name">TreeMap<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span>
        <span class="token keyword">new</span> <span class="token class-name">AbstractMap<span class="token punctuation">.</span>SimpleImmutableEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="lowerentry-方法"><a href="#lowerentry-方法" class="header-anchor">#</a> lowerEntry 方法</h2> <p><code>lowerEntry</code>方法返回比所给定key小的最大key的Entry元素。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">lowerEntry</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">exportEntry</span><span class="token punctuation">(</span><span class="token function">getLowerEntry</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">getLowerEntry</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> root<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cmp <span class="token operator">=</span> <span class="token function">compare</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                p <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> p<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                p <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> parent <span class="token operator">=</span> p<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
                <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> ch <span class="token operator">=</span> p<span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">==</span> parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    ch <span class="token operator">=</span> parent<span class="token punctuation">;</span>
                    parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> parent<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="put-方法"><a href="#put-方法" class="header-anchor">#</a> put 方法</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> t <span class="token operator">=</span> root<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">compare</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// type (and possibly null) check</span>

        root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> cmp<span class="token punctuation">;</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> parent<span class="token punctuation">;</span>
    <span class="token comment">// split comparator and comparable paths</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> cpr <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cpr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            parent <span class="token operator">=</span> t<span class="token punctuation">;</span>
            cmp <span class="token operator">=</span> cpr<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> t<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                t <span class="token operator">=</span> t<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                t <span class="token operator">=</span> t<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> k <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> key<span class="token punctuation">;</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            parent <span class="token operator">=</span> t<span class="token punctuation">;</span>
            cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                t <span class="token operator">=</span> t<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                t <span class="token operator">=</span> t<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        parent<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        parent<span class="token punctuation">.</span>right <span class="token operator">=</span> e<span class="token punctuation">;</span>
    <span class="token function">fixAfterInsertion</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>put</code>方法的大致处理流程如下：</p> <ol><li>判断红黑树的根节点是否为空，如果为空的情况，那么直接把本次<code>put</code>操作的键值对作为根节点。</li> <li>根据<code>comparator</code>属性是否为空，决定遍历红黑树时如何判断顺序。</li> <li>如果<code>comparator</code>不为空，那么使用<code>comparator</code>比较红黑树中每个节点与<code>key</code>的大小；如果<code>comparator</code>，那么使用<code>key</code>的<code>compareTo</code>方法比较红黑树中节点与<code>key</code>的大小，此时会有一次强制类型转换。</li> <li>在比较完红黑树中节点与<code>key</code>的大小后，找到了插入节点的位置，创建<code>Entry</code>对象放入树中，并调用<code>fixAfterInsertion</code>维护红黑树的平衡。</li></ol> <h2 id="get-方法"><a href="#get-方法" class="header-anchor">#</a> get 方法</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> <span class="token function">getEntry</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>p<span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> p<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEntry</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Offload comparator-based version for sake of performance</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">getEntryUsingComparator</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
        <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> k <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> key<span class="token punctuation">;</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> root<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            p <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            p <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEntryUsingComparator</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
        <span class="token class-name">K</span> k <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">K</span><span class="token punctuation">)</span> key<span class="token punctuation">;</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> cpr <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cpr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> root<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> cmp <span class="token operator">=</span> cpr<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                p <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                p <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> p<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>get</code>方法的大致流程如下：</p> <ol><li>判断<code>comparator</code>是否为空，如果不为空，那么调用<code>getEntryUsingComparator</code>方法通过<code>comparator</code>在树中进行查找。</li> <li>否则使用<code>key</code>的<code>compareTo</code>方法，比较<code>key</code>的大小并在树中进行查找。</li></ol> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <ul><li><code>TreeMap</code>中<code>key</code>不能为空，否则会抛出空指针。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/java/collection/LinkedHashMap.html" class="prev">
        LinkedHashMap
      </a></span> <span class="next"><a href="/note/java/collection/Red-Black-Tree.html">
        Red-Black-Tree
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.e7654e9f.js" defer></script><script src="/note/assets/js/2.e810aa3c.js" defer></script><script src="/note/assets/js/1.07fc4d8c.js" defer></script><script src="/note/assets/js/43.cca6ff22.js" defer></script>
  </body>
</html>
